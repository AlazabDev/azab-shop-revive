# ๐ง ูุญุฏุฉ ุทูุจุงุช ุงูุตูุงูุฉ - ุฏููู ุดุงูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุญุฏุฉ ุทูุจุงุช ุงูุตูุงูุฉ ูู ุงูููุจ ุงููุงุจุถ ููุธุงู ุฅุฏุงุฑุฉ ุงูุตูุงูุฉุ ุชุชูุญ ูููุณุชุฎุฏููู ุฅูุดุงุก ููุชุงุจุนุฉ ุทูุจุงุช ุงูุตูุงูุฉ ุจุดูู ูุงูู.

---

## โ ุงููุธุงุฆู ุงููุชููุฑุฉ

### 1. ุฅูุดุงุก ุทูุจ ุตูุงูุฉ ุฌุฏูุฏ
- โ ูููุฐุฌ ูุชูุงูู ูุน ุงูุชุญูู ูู ุงูุจูุงูุงุช
- โ ุฏุนู ุชุญุฏูุฏ ุงููููุน ุนูู ุงูุฎุฑูุทุฉ
- โ ุฑุจุท ุงูุทูุจ ุจุนูุงุฑ ูุญุฏุฏ
- โ ุงุฎุชูุงุฑ ููุน ุงูุฎุฏูุฉ ูุงูุฃููููุฉ
- โ ุชุญุฏูุฏ ููุนุฏ ููุถู ููุฒูุงุฑุฉ

### 2. ุนุฑุถ ูุงุฆูุฉ ุงูุทูุจุงุช
- โ ุฌุฏูู ุชูุงุนูู ูุน ุงูุจุญุซ ูุงูุชุตููุฉ
- โ ูุณุฎุฉ ูุญููู ูุฎุตุตุฉ ููููุงุชู
- โ ููุชุฑุฉ ุญุณุจ (ุงูุญุงูุฉุ ุงูุฃููููุฉุ ููุน ุงูุฎุฏูุฉุ ุงูุชุงุฑูุฎุ ุงูุชูููุฉ)
- โ ุชุตุฏูุฑ ุงูุจูุงูุงุช (PDF, Excel, CSV)

### 3. ุชูุงุตูู ุงูุทูุจ
- โ ุนุฑุถ ูุงูู ููุนูููุงุช ุงูุทูุจ
- โ ูุชุงุจุนุฉ ุฏูุฑุฉ ุญูุงุฉ ุงูุทูุจ
- โ ุณูุฑ ุงูุนูู (Workflow)
- โ ุฅุฏุงุฑุฉ ุงูููุงุฏ ุงููุทููุจุฉ
- โ ูุธุงู ุงูููุงููุงุช
- โ ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช

### 4. ุชุญุฏูุซ ุงูุทูุจ
- โ ุชุบููุฑ ุงูุญุงูุฉ ูุน ุชุชุจุน ุงูุชุบููุฑุงุช
- โ ุชุนููู ููู ููุทูุจ
- โ ุฅุถุงูุฉ ููุงุญุธุงุช
- โ ุชุญุฏูุซ ุงูุชูููุฉ ูุงูููุนุฏ ุงููุชููุน

### 5. ุงูุฃูุงู (RLS Policies)
- โ ูู ูุณุชุฎุฏู ูุฑู ุทูุจุงุชู ููุท
- โ ุงูููุธููู ูุฑูู ุฌููุน ุงูุทูุจุงุช
- โ ุงูููููู ูุฑูู ุงูุทูุจุงุช ุงููุนููุฉ ููู
- โ ุญูุงูุฉ ุจูุงูุงุช ุงูุนููุงุก ุงูุญุณุงุณุฉ

---

## ๐ ูููุงุช ุงููุญุฏุฉ

### ุงูุตูุญุงุช (Pages)
```
src/pages/
โโโ Requests.tsx              # ุตูุญุฉ ูุงุฆูุฉ ุงูุทูุจุงุช ุงูุฑุฆูุณูุฉ
โโโ RequestDetails.tsx        # ุตูุญุฉ ุชูุงุตูู ุงูุทูุจ
```

### ุงูููููุงุช (Components)
```
src/components/maintenance/
โโโ MaintenanceRequestsList.tsx      # ูุงุฆูุฉ ุงูุทูุจุงุช (ูุณุฎุฉ ุงูุญุงุณูุจ)
โโโ MobileMaintenanceList.tsx        # ูุงุฆูุฉ ุงูุทูุจุงุช (ูุณุฎุฉ ุงูููุจุงูู)
โโโ MaintenanceRequestDetails.tsx    # ุชูุงุตูู ุงูุทูุจ
โโโ MaintenanceRequestActions.tsx    # ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช
โโโ MaintenanceFilters.tsx           # ููุงุชุฑ ุงูุจุญุซ ูุงูุชุตููุฉ
โโโ MaintenanceExport.tsx            # ุชุตุฏูุฑ ุงูุจูุงูุงุช
โโโ RequestLifecycleTracker.tsx      # ูุชุงุจุนุฉ ุฏูุฑุฉ ุงูุญูุงุฉ
โโโ RequestWorkflowControls.tsx      # ุงูุชุญูู ูู ุณูุฑ ุงูุนูู
โโโ RequestStatusBadge.tsx           # ุดุงุฑุฉ ุงูุญุงูุฉ (ุฌุฏูุฏ)
โโโ RequestPriorityBadge.tsx         # ุดุงุฑุฉ ุงูุฃููููุฉ (ุฌุฏูุฏ)
โโโ EmptyRequestsState.tsx           # ุญุงูุฉ ูุงุฑุบุฉ (ุฌุฏูุฏ)
โโโ RequestLoadingState.tsx          # ุญุงูุฉ ุงูุชุญููู (ุฌุฏูุฏ)
โโโ RequestErrorState.tsx            # ุญุงูุฉ ุงูุฎุทุฃ (ุฌุฏูุฏ)
```

### ุงูููุงุฐุฌ (Forms)
```
src/components/forms/
โโโ NewRequestForm.tsx        # ูููุฐุฌ ุทูุจ ุตูุงูุฉ ุฌุฏูุฏ
โโโ LocationPicker.tsx        # ุงุฎุชูุงุฑ ุงููููุน ุนูู ุงูุฎุฑูุทุฉ
โโโ NewPropertyForm.tsx       # ูููุฐุฌ ุนูุงุฑ ุฌุฏูุฏ
```

### ุงูู Hooks
```
src/hooks/
โโโ useMaintenanceRequests.ts    # Hook ุฑุฆูุณู ูุฅุฏุงุฑุฉ ุงูุทูุจุงุช (ูุญุณูู)
โโโ useRequestLifecycle.ts       # Hook ูุฅุฏุงุฑุฉ ุฏูุฑุฉ ุงูุญูุงุฉ
โโโ useRequestFilters.ts         # Hook ููููุงุชุฑ (ุฌุฏูุฏ)
```

### ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ (Utils)
```
src/utils/
โโโ requestValidation.ts     # ุงูุชุญูู ูู ุงูุจูุงูุงุช (ุฌุฏูุฏ)
โโโ requestFormatters.ts     # ุชูุณูู ุงูุจูุงูุงุช (ุฌุฏูุฏ)
```

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู maintenance_requests

#### ุงูุญููู ุงูุฃุณุงุณูุฉ:
- `id` (uuid) - ูุนุฑู ูุฑูุฏ
- `title` (text) - ุนููุงู ุงูุทูุจ *
- `description` (text) - ูุตู ุงููุดููุฉ
- `client_name` (text) - ุงุณู ุงูุนููู *
- `client_phone` (text) - ุฑูู ุงููุงุชู *
- `client_email` (text) - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- `location` (text) - ุงูุนููุงู *
- `latitude` (numeric) - ุฎุท ุงูุนุฑุถ
- `longitude` (numeric) - ุฎุท ุงูุทูู

#### ุชูุงุตูู ุงูุทูุจ:
- `service_type` (text) - ููุน ุงูุฎุฏูุฉ *
- `priority` (text) - ุงูุฃููููุฉ (low/medium/high) *
- `status` (text) - ุงูุญุงูุฉ *
- `workflow_stage` (enum) - ูุฑุญูุฉ ุณูุฑ ุงูุนูู

#### ุงูููุงุนูุฏ ูุงูุชูุงููู:
- `preferred_date` (date) - ุงูุชุงุฑูุฎ ุงูููุถู
- `preferred_time` (varchar) - ุงูููุช ุงูููุถู
- `estimated_cost` (numeric) - ุงูุชูููุฉ ุงููุชููุนุฉ
- `actual_cost` (numeric) - ุงูุชูููุฉ ุงููุนููุฉ
- `estimated_completion` (date) - ููุนุฏ ุงูุงูุชูุงุก ุงููุชููุน
- `actual_completion` (timestamp) - ููุนุฏ ุงูุงูุชูุงุก ุงููุนูู

#### SLA ูุฅุฏุงุฑุฉ ุงูุฌูุฏุฉ:
- `sla_due_date` (timestamp) - ุงูููุนุฏ ุงูููุงุฆู ุญุณุจ SLA
- `escalation_level` (integer) - ูุณุชูู ุงูุชุตุนูุฏ
- `quality_score` (numeric) - ุชูููู ุงูุฌูุฏุฉ
- `rating` (integer) - ุชูููู ุงูุนููู (1-5)

#### ุงูุชุชุจุน ูุงููุชุงุจุนุฉ:
- `follow_up_required` (boolean) - ูุญุชุงุฌ ูุชุงุจุนุฉุ
- `follow_up_date` (timestamp) - ุชุงุฑูุฎ ุงููุชุงุจุนุฉ
- `archived_at` (timestamp) - ุชุงุฑูุฎ ุงูุฃุฑุดูุฉ
- `completion_photos` (array) - ุตูุฑ ุงูุฅูุฌุงุฒ

#### ุงูุนูุงูุงุช:
- `requested_by` (uuid) - ุงููุณุชุฎุฏู ุงูุทุงูุจ
- `assigned_vendor_id` (uuid) - ุงูููู ุงููุนูู
- `property_id` (uuid) - ุงูุนูุงุฑ ุงููุฑุชุจุท

#### ุงูุฃููุงุช:
- `created_at` (timestamp) - ุชุงุฑูุฎ ุงูุฅูุดุงุก
- `updated_at` (timestamp) - ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ

---

## ๐ ุณูุงุณุงุช ุงูุฃูุงู (RLS)

### 1. ุนุฑุถ ุงูุทูุจุงุช (SELECT)
```sql
-- ุงููุณุชุฎุฏู ูุฑู ุทูุจุงุชู ุฃู ุงูุทูุจุงุช ุงููุนููุฉ ูู
(requested_by = auth.uid()) OR 
(assigned_vendor_id = auth.uid()) OR 
is_staff(auth.uid())
```

### 2. ุฅูุดุงุก ุทูุจ (INSERT)
```sql
-- ุงููุณุชุฎุฏู ููููู ุฅูุดุงุก ุทูุจ ุจุงุณูู ุฃู ุงูููุธููู
(requested_by = auth.uid()) OR 
is_staff(auth.uid())
```

### 3. ุชุญุฏูุซ ุทูุจ (UPDATE)
```sql
-- ุตุงุญุจ ุงูุทูุจ ุฃู ุงูููู ุงููุนูู ุฃู ุงูููุธููู
(requested_by = auth.uid() AND status IN ('pending', 'scheduled')) OR
(assigned_vendor_id = auth.uid() AND has_role('vendor')) OR
is_staff(auth.uid())
```

### 4. ุญุฐู ุทูุจ (DELETE)
```sql
-- ููุท ุงููุฏูุฑูู ูุงูุฅุฏุงุฑููู
has_role(auth.uid(), 'admin') OR 
has_role(auth.uid(), 'manager')
```

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุงูุฃููุงู ูุงูุชุตููู:
- **Pending**: ุฃุตูุฑ - `bg-yellow-100`
- **In Progress**: ุฃุฒุฑู - `bg-blue-100`
- **Completed**: ุฃุฎุถุฑ - `bg-green-100`
- **Cancelled**: ุฃุญูุฑ - `bg-red-100`

### ุดุงุฑุงุช ุงูุฃููููุฉ:
- **Low**: ุฃุฒุฑู ูุงุชุญ ูุน ุฃููููุฉ Info
- **Medium**: ุฃุตูุฑ ูุน ุฃููููุฉ Triangle
- **High**: ุฃุญูุฑ ูุน ุฃููููุฉ Alert

---

## ๐ ุฏูุฑุฉ ุญูุงุฉ ุงูุทูุจ (Workflow)

```
Draft (ูุณูุฏุฉ)
  โ
Submitted (ูููุฏู)
  โ
Acknowledged (ุชู ุงูุงุณุชูุงู)
  โ
Assigned (ุชู ุงูุชุนููู)
  โ
Scheduled (ูุฌุฏูู)
  โ
In Progress (ููุฏ ุงูุชูููุฐ)
  โ
Inspection (ุชุญุช ุงููุญุต)
  โ
Completed (ููุชูู)
  โ
Billed (ุชู ุฅุตุฏุงุฑ ูุงุชูุฑุฉ)
  โ
Paid (ูุฏููุน)
  โ
Closed (ูุบูู)
```

### ุงูุญุงูุงุช ุงูุฎุงุตุฉ:
- **Waiting Parts**: ุจุงูุชุธุงุฑ ูุทุน ุบูุงุฑ
- **On Hold**: ูุนูู
- **Cancelled**: ููุบู

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ

### ูุคุดุฑุงุช ุงูุฃุฏุงุก (KPIs):
1. ุนุฏุฏ ุงูุทูุจุงุช ุงูุฅุฌูุงูู
2. ุงูุทูุจุงุช ููุฏ ุงูุชูููุฐ
3. ุงูุทูุจุงุช ุงูููุชููุฉ
4. ูุชูุณุท ููุช ุงูุงุณุชุฌุงุจุฉ
5. ูุชูุณุท ุงูุชูููุฉ
6. ูุณุจุฉ ุฑุถุง ุงูุนููุงุก

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงูุณููุงุฑูููุงุช ุงูุฃุณุงุณูุฉ:

#### 1. ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
```typescript
// 1. ุชุณุฌูู ุงูุฏุฎูู
// 2. ุงูุฐูุงุจ ุฅูู ุตูุญุฉ ุงูุทูุจุงุช
// 3. ุงูุถุบุท ุนูู "ุทูุจ ุตูุงูุฉ ุฌุฏูุฏ"
// 4. ููุก ุงููููุฐุฌ ุจุงููุงูู
// 5. ุงูุถุบุท ุนูู "ุฅุฑุณุงู"
// โ ุงูุชุญูู: ุธููุฑ ุฑุณุงูุฉ ูุฌุงุญ
// โ ุงูุชุญูู: ุธููุฑ ุงูุทูุจ ูู ุงููุงุฆูุฉ
```

#### 2. ุงูุจุญุซ ูุงูุชุตููุฉ
```typescript
// 1. ูุชุญ ุตูุญุฉ ุงูุทูุจุงุช
// 2. ุงุณุชุฎุฏุงู ุงูุจุญุซ ุงููุตู
// 3. ุงุฎุชูุงุฑ ููุชุฑ ุงูุญุงูุฉ
// 4. ุงุฎุชูุงุฑ ููุชุฑ ุงูุฃููููุฉ
// โ ุงูุชุญูู: ุชุญุฏูุซ ุงููุงุฆูุฉ ุจุดูู ุตุญูุญ
```

#### 3. ุนุฑุถ ุงูุชูุงุตูู
```typescript
// 1. ุงูุถุบุท ุนูู ุทูุจ ูู ุงููุงุฆูุฉ
// 2. ุงูุชููู ุจูู ุงูุชุจููุจุงุช
// 3. ุนุฑุถ ุฏูุฑุฉ ุงูุญูุงุฉ
// โ ุงูุชุญูู: ุนุฑุถ ุฌููุน ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ
```

---

## ๐ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ:

#### 1. ุฎุทุฃ ูู ุงูุชุญููู
```typescript
// ุงูุญู: ุนุฑุถ RequestErrorState ูุน ุฒุฑ "ุฅุนุงุฏุฉ ุงููุญุงููุฉ"
<RequestErrorState error={error} onRetry={refetch} />
```

#### 2. ูุง ุชูุฌุฏ ุทูุจุงุช
```typescript
// ุงูุญู: ุนุฑุถ EmptyRequestsState
<EmptyRequestsState onCreateClick={handleCreate} />
```

#### 3. ูุดู ูู ุงูุฅูุดุงุก
```typescript
// ุงูุญู: ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ูุน ุงูุชูุงุตูู
toast({
  title: "ุฎุทุฃ",
  description: error.message,
  variant: "destructive"
})
```

---

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

### ุงููุฑุญูุฉ 1 (ูุฑูุจุงู):
- [ ] ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ููุฑูุฉ (Real-time)
- [ ] ุฏุนู ุงููููุงุช ุงููุฑููุฉ
- [ ] ูุธุงู ุงูุชุนูููุงุช ูุงูุฑุณุงุฆู
- [ ] ุชูููู ุงูููููู

### ุงููุฑุญูุฉ 2 (ูุชูุณุท ุงูุฃุฌู):
- [ ] ุชุทุจูู ุงูููุจุงูู ุงูุฃุตูู
- [ ] ุฏุนู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ
- [ ] ูุธุงู ุงูููุงุชูุฑ ุงูุชููุงุฆู
- [ ] ุชูุงูู ูุน Google Calendar

### ุงููุฑุญูุฉ 3 (ุทููู ุงูุฃุฌู):
- [ ] ุงูุฐูุงุก ุงูุงุตุทูุงุนู ููุชูุจุค
- [ ] ูุธุงู ุงูุชูุตูุงุช
- [ ] ุชุญูููุงุช ูุชูุฏูุฉ
- [ ] ุฏุนู ุงููุฏููุนุงุช ุงูุฅููุชุฑูููุฉ

---

## ๐ ุงูุฏุนู ุงูููู

ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู:
1. ุชุญูู ูู ุณุฌู ุงูุฃุฎุทุงุก ูู Console
2. ุชุญูู ูู RLS Policies
3. ุชุญูู ูู ุญุงูุฉ ุงููุณุชุฎุฏู (logged inุ)
4. ุฑุงุฌุน ููู ูุฐุง ุงูุชูุซูู

---

## โจ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ (ุชู ุฅุถุงูุชูุง ุงูููู)

### 1. Hooks ูุญุณููุฉ
- โ `useMaintenanceRequests` - ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุญุณููุฉ
- โ `useRequestFilters` - hook ูููุตู ููููุงุชุฑ

### 2. ููููุงุช UI ุฌุฏูุฏุฉ
- โ `RequestStatusBadge` - ุดุงุฑุฉ ุญุงูุฉ ููุญุฏุฉ
- โ `RequestPriorityBadge` - ุดุงุฑุฉ ุฃููููุฉ ููุญุฏุฉ
- โ `EmptyRequestsState` - ุญุงูุฉ ูุงุฑุบุฉ ุฌูููุฉ
- โ `RequestLoadingState` - ุญุงูุฉ ุชุญููู ุงุญุชุฑุงููุฉ
- โ `RequestErrorState` - ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุงุถุญุฉ

### 3. ุฃุฏูุงุช ูุณุงุนุฏุฉ
- โ `requestValidation.ts` - ุงูุชุญูู ูู ุงูุจูุงูุงุช ุจู Zod
- โ `requestFormatters.ts` - ุชูุณูู ุงูุชูุงุฑูุฎ ูุงูุฃุฑูุงู

---

## ๐ฏ ุงูุฎูุงุตุฉ

ูุญุฏุฉ ุทูุจุงุช ุงูุตูุงูุฉ ุงูุขู **ููุชููุฉ 100%** ูุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู ุงูุฅูุชุงุฌู! โ

ุฌููุน ุงููุธุงุฆู ุชุนูู ุจุดูู ุตุญูุญ:
- โ ุฅูุดุงุก ุทูุจุงุช ุฌุฏูุฏุฉ
- โ ุนุฑุถ ูุชุตููุฉ ุงูุทูุจุงุช
- โ ุชุญุฏูุซ ููุชุงุจุนุฉ ุงูุทูุจุงุช
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- โ ุงูุฃูุงู ูุงูุฎุตูุตูุฉ
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ุฌูููุฉ
- โ ูุณุฎุฉ ููุจุงูู ูุชุฌุงูุจุฉ

---

**ุขุฎุฑ ุชุญุฏูุซ**: 16 ุฃูุชูุจุฑ 2025
**ุงูุฅุตุฏุงุฑ**: 2.0.0
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุฅูุชุงุฌ
